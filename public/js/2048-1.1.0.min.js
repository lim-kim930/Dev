/** 
 * Readme Alert
 * Production version 1.1.0
 * The original author of the code: Jovi, who is the owner of the website http://jovilab.sinaapp.com.
 * Partially modified by limkim and updated to version 1.1.0.
 * You can get the minified version of this js file for development at this link: https://limkim.xyz/test/js/2048-1.1.0.js.
 * If you find a problem with this code or have some suggestions, please contact us by email. E-mail: 1625753207lim@gmail.com.
 */
const gmFactory=function(_0x432d69){let _0x46c1bc;let _0x532f52,_0xa2d724=_0x46c1bc=0x0,_0x5e73b6=0x800,_0x415eec=[],_0x2331d3=[];let _0x2b8986={'start':[],'end':[],'move':[]};let _0x51f73b;_0x51f73b={'init':function(_0x19a04d,_0x28fdee){_0x532f52=new Array(_0x19a04d*_0x19a04d);_0x432d69=_0x19a04d;for(let _0x270866=0x0;_0x270866<_0x532f52['length'];_0x270866++){_0x532f52[_0x270866]=0x0;}if(_0x28fdee)_0x5e73b6=_0x28fdee;Object['defineProperty'](this,'tiles',{'get':function(){return _0x532f52;}});Object['defineProperty'](this,'actions',{'get':function(){return _0x415eec;}});Object['defineProperty'](this,'highestScore',{'get':function(){return _0xa2d724;}});Object['defineProperty'](this,'moves',{'get':function(){return _0x46c1bc;}});Object['defineProperty'](this,'maxScores',{'get':function(){return _0x5e73b6;}});for(i=0x0;i<0x6;i++){this['randomVal']();}},'randomVal':function(){let _0x34b2df=[];for(let _0x295e06=0x0;_0x295e06<_0x532f52['length'];_0x295e06++){if(_0x532f52[_0x295e06]==0x0)_0x34b2df['push'](_0x295e06);}if(_0x34b2df['length']<0x1){return![];}const _0x1f2dad=_0x34b2df[Math['floor'](Math['random']()*_0x34b2df['length'])];_0x532f52[_0x1f2dad]=Math['random']()<0.8?0x2:0x4;_0x415eec['push']({'type':'create','index':_0x1f2dad,'value':_0x532f52[_0x1f2dad]});},'move':function(_0x90db39){let _0x367e21,_0x2b02ac,_0x3c73d4;_0x415eec=[];if(_0x90db39==='up'){_0x367e21=0x0;_0x2b02ac=0x1;_0x3c73d4=_0x432d69;}else if(_0x90db39==='left'){_0x367e21=0x0;_0x2b02ac=_0x432d69;_0x3c73d4=0x1;}else if(_0x90db39==='down'){_0x367e21=_0x532f52['length']-0x1;_0x2b02ac=-0x1;_0x3c73d4=-_0x432d69;}else if(_0x90db39==='right'){_0x367e21=_0x532f52['length']-0x1;_0x2b02ac=-_0x432d69;_0x3c73d4=-0x1;}_0x46c1bc++;const _0x24477c=_0x532f52['length']-0x1-_0x367e21;let _0x3470fa=_0x367e21;let _0x5f46f6=[];for(let _0x505faa=0x0;_0x505faa<_0x532f52['length'];_0x505faa++){_0x5f46f6[_0x505faa]=_0x532f52[_0x505faa];}_0x2331d3['push'](_0x5f46f6);let _0xde3cc0=0x0;while(_0x24477c!=0x0&&_0x3470fa<_0x24477c||_0x24477c==0x0&&_0x3470fa>0x0&&_0xde3cc0<_0x432d69){let _0xdef3a6=_0x3470fa;while(!this['isAtEdge'](_0x90db39,_0x3470fa)){_0xdef3a6=_0xdef3a6+_0x3c73d4;const _0x511d74=_0x532f52[_0xdef3a6];const _0xa11ccb=_0x532f52[_0x3470fa];const _0x32c08c=this['swallowUp'](_0xdef3a6,_0x3470fa);if(_0x32c08c||!_0x32c08c&&_0x511d74!=0x0&&_0xa11ccb!=0x0){_0x3470fa=_0x3470fa+_0x3c73d4;_0xdef3a6=_0x3470fa;continue;}if(this['isAtEdge'](_0x90db39,_0xdef3a6)){_0x3470fa=_0xdef3a6;break;}}_0x367e21+=_0x2b02ac;_0xde3cc0++;_0x3470fa=_0x367e21;}this['randomVal']();},'isAtEdge':function(_0x4886fc,_0x5bb2e0){let _0x19214a=0x0,_0x3c7146=_0x432d69-0x1;const _0x366865=_0x432d69-0x1,_0xa91757=_0x532f52['length']-_0x432d69;switch(_0x4886fc){case'down':return _0x5bb2e0<=_0x366865;case'up':return _0x5bb2e0>=_0xa91757;case'left':return _0x5bb2e0%_0x432d69==_0x3c7146;case'right':return _0x5bb2e0%_0x432d69==_0x19214a;}},'swallowUp':function(_0x4a0bd6,_0x2af785){const _0x5c166f=_0x532f52[_0x4a0bd6],_0x360e2b=_0x532f52[_0x2af785];if(_0x5c166f==0x0)return![];if(_0x5c166f==_0x360e2b||_0x360e2b==0x0){const _0x5d16ae=_0x5c166f+_0x360e2b;_0x532f52[_0x2af785]=_0x5d16ae;_0x532f52[_0x4a0bd6]=0x0;_0x415eec['push']({'type':'move','from':{'index':_0x4a0bd6,'value':_0x5c166f},'to':{'index':_0x2af785,'value':_0x5d16ae}});_0xa2d724=Math['max'](_0xa2d724,_0x5d16ae);if(_0xa2d724==_0x5e73b6){this['init'](_0x432d69);this['fireEvent']('end',this);}return _0x360e2b!=0x0;}return![];},'back':function(){if(_0x2331d3['length']<0x1)return;_0x532f52=_0x2331d3['pop']();this['render']();},'setRenderer':function(_0x35db2f){this['renderer']=_0x35db2f;_0x35db2f['init'](this);},'render':function(){this['renderer']['render'](this['tiles'],_0x415eec);},'on':function(_0x1ab9b9,_0x501f9e,_0x28606c){if(!_0x2b8986[_0x1ab9b9])return;let _0x25491e=_0x2b8986[_0x1ab9b9];_0x25491e['push']({'fn':_0x501f9e,'scope':_0x28606c});},'un':function(_0x33e017,_0x32a766,_0x3ba1be){if(!_0x2b8986[_0x33e017])return;let _0x292150=_0x2b8986[_0x33e017];if(_0x292150['length']<0x1)return;for(let _0x43258a=0x0;_0x43258a<_0x292150['length'];_0x43258a++){const _0x2d3772=_0x292150[_0x43258a];if(_0x2d3772['fn']==_0x32a766&&_0x2d3772['scope']==_0x3ba1be){_0x292150['splice'](_0x43258a,0x1);break;}}},'fireEvent':function(){const _0x3012be=arguments[0x0];const _0x425b26=arguments['slice'](0x1);const _0x27f429=_0x2b8986[_0x3012be];if(!_0x27f429||_0x27f429['length']<0x1)return;for(let _0x532064=0x0;_0x532064<_0x27f429['length'];_0x532064++){let _0x26f714=_0x27f429[_0x532064];if(typeof _0x26f714['fn']=='function'){_0x26f714['fn']['apply'](_0x26f714['scope'],_0x425b26);}}}};_0x51f73b['init'](_0x432d69);return _0x51f73b;};let consoleRender=function(){};consoleRender['prototype']['map']={0x57:'up',0x53:'down',0x41:'left',0x44:'right',0x25:'left',0x26:'up',0x27:'right',0x28:'down',0x5a:'z'};consoleRender['prototype']['game']=null;consoleRender['prototype']['colorPalette']=function(_0x3d3128){const _0x4a9624=['#eee4da','#ede0c8','#f2b179','#f59563','#f67c5f','#f65e3b','#edcf72','#edcc61','#edc850','#edc53f','#edc22e'];let _0x5ae3d9={};const _0x488a66=_0x3d3128['split'](',');const _0x4f37cb=_0x488a66['length'];for(let _0x566af2=0x0;_0x566af2<_0x4f37cb;_0x566af2++){_0x5ae3d9[_0x488a66[_0x566af2]]='background-color:'+_0x4a9624[_0x566af2]+';';}return _0x5ae3d9;};consoleRender['prototype']['pad']=function(_0x57f565,_0x16c20a){_0x57f565=(_0x57f565||'\x20')+'';while(_0x16c20a>_0x57f565['length'])_0x57f565='\x20'+_0x57f565+'\x20';if(_0x57f565['length']>_0x16c20a)_0x57f565=_0x57f565['slice'](0x0,_0x16c20a-_0x57f565['length']);return _0x57f565;};consoleRender['prototype']['render']=function(_0x424aaf,_0x2d0d28,_0x52ab20){if(!_0x52ab20)console['clear']();console['log']('\x20');const _0x2ee741=Math['sqrt'](_0x424aaf['length']);const _0x54014a=this['colorPalette']('2,4,8,16,32,64,128,256,512,1024,2048');const _0x55008b='text-align:center;width:100px;display:block;background-color:#ccc;padding:4px\x207px;line-height:1.4;color:#000;';for(let _0x3d6f5d=0x0;_0x3d6f5d<_0x2ee741;_0x3d6f5d+=0x1){let _0x29cd11=[];let _0x4d5d1f=[];for(let _0x1b8714=0x0;_0x1b8714<_0x2ee741;_0x1b8714++){const _0x3e5bc1=_0x424aaf[_0x2ee741*_0x3d6f5d+_0x1b8714];_0x29cd11['push']('%c'+this['pad'](_0x3e5bc1,0x4)+'%c');_0x4d5d1f['push'](_0x55008b+'font-size:14px;'+(_0x54014a[_0x3e5bc1]||''));_0x4d5d1f['push']('');}_0x29cd11['push']('%c'+Math['random']());_0x4d5d1f['push']('padding-left:50px;dispaly:none;color:white;line-height:1.3');console['log']['apply'](console,[_0x29cd11['join']('')]['concat'](_0x4d5d1f));}let _0x2411bc=[];for(let _0x4bfdc2=0x0;_0x4bfdc2<_0x2d0d28['length'];_0x4bfdc2++){const _0x15ef88=_0x2d0d28[_0x4bfdc2];if(_0x15ef88['type']==='move'){_0x2411bc['push']('#'+_0x15ef88['from']['index']+'->#'+_0x15ef88['to']['index']);}else{_0x2411bc['push'](_0x15ef88['value']+'\x20created\x20at\x20#'+_0x15ef88['index']);}}console['log']('actions:\x20'+_0x2411bc['join']('\x20,\x20')+'\x20,\x20'+'highestScore:'+this['game']['highestScore']);};consoleRender['prototype']['keydownHandler']=function(_0x2d941f){let _0x3e726c,_0x580b9a;_0x3e726c=_0x2d941f['keyCode']||_0x2d941f['which'];if(!this['started']){if(_0x3e726c===0xd){this['started']=!![];this['game']['render']();}return;}if(!this['map'][_0x3e726c])return;if(this['map'][_0x3e726c]==='z'){return this['game']['back']();}this['game']['move'](this['map'][_0x3e726c]);this['game']['render']();};consoleRender['prototype']['init']=function(_0x59aa6a){console['log']('%c芜湖~!\x20感谢访问俺滴小破站,\x20既然打开了控制台,\x20那就试试在这里玩2048吧!%c','color:#999;font-family:幼圆;font-size:14px','');const _0x159438=['点击一下网页空白处,\x20确保焦点在网页上,\x20并敲击\x20%c回车%c\x20开始游戏,\x20你可以使用\x20%c方向键%c\x20或者\x20%cW\x20A\x20S\x20D%c\x20来控制。','color:red;font-weight:bold;','','color:red;font-weight:bold;','','color:red;font-weight:bold;',''];console['log']['apply'](console,_0x159438);this['game']=_0x59aa6a;if(typeof $=='function'){$(window)['on']('keydown',$['proxy'](this['keydownHandler'],this));}else{window['addEventListener']=this['keydownHandler']['bind'](this);}};(()=>{if(!console)return;const _0x676d97=new gmFactory(0x4);const _0x138a00=new consoleRender();_0x676d97['setRenderer'](_0x138a00);_0x138a00['render'](_0x676d97['tiles'],_0x676d97['actions'],!![]);})();