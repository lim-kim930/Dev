/** 
 * Readme Alert
 * Production version 1.1.0
 * The original author of the code: Jovi, who is the owner of the website http://jovilab.sinaapp.com.
 * Partially modified by limkim and updated to version 1.1.0.
 * You can get the minified version of this js file for development at this link: https://limkim.xyz/test/js/2048-1.1.0.js.
 * If you find a problem with this code or have some suggestions, please contact us by email. E-mail: 1625753207lim@gmail.com.
 */
const gmFactory=function(_0x9d4f41){let _0x469cc8;let _0x32801a,_0x2e3b32=_0x469cc8=0x0,_0x39c51a=0x800,_0x10871a=[],_0x2ef0f5=[];let _0x3807c9={'start':[],'end':[],'move':[]};let _0x3cdddc;_0x3cdddc={'init':function(_0x570538,_0x2f1ead){_0x32801a=new Array(_0x570538*_0x570538);_0x9d4f41=_0x570538;for(let _0x2876ff=0x0;_0x2876ff<_0x32801a['length'];_0x2876ff++){_0x32801a[_0x2876ff]=0x0;}if(_0x2f1ead)_0x39c51a=_0x2f1ead;Object['defineProperty'](this,'tiles',{'get':function(){return _0x32801a;}});Object['defineProperty'](this,'actions',{'get':function(){return _0x10871a;}});Object['defineProperty'](this,'highestScore',{'get':function(){return _0x2e3b32;}});Object['defineProperty'](this,'moves',{'get':function(){return _0x469cc8;}});Object['defineProperty'](this,'maxScores',{'get':function(){return _0x39c51a;}});for(i=0x0;i<0x6;i++){this['randomVal']();}},'randomVal':function(){let _0x4c9dbb=[];for(let _0x1c66c7=0x0;_0x1c66c7<_0x32801a['length'];_0x1c66c7++){if(_0x32801a[_0x1c66c7]==0x0)_0x4c9dbb['push'](_0x1c66c7);}if(_0x4c9dbb['length']<0x1){return![];}const _0x4e21b5=_0x4c9dbb[Math['floor'](Math['random']()*_0x4c9dbb['length'])];_0x32801a[_0x4e21b5]=Math['random']()<0.8?0x2:0x4;_0x10871a['push']({'type':'create','index':_0x4e21b5,'value':_0x32801a[_0x4e21b5]});},'move':function(_0x358d3c){let _0x1f4c9a,_0x5d0539,_0x56a34f;_0x10871a=[];if(_0x358d3c==='up'){_0x1f4c9a=0x0;_0x5d0539=0x1;_0x56a34f=_0x9d4f41;}else if(_0x358d3c==='left'){_0x1f4c9a=0x0;_0x5d0539=_0x9d4f41;_0x56a34f=0x1;}else if(_0x358d3c==='down'){_0x1f4c9a=_0x32801a['length']-0x1;_0x5d0539=-0x1;_0x56a34f=-_0x9d4f41;}else if(_0x358d3c==='right'){_0x1f4c9a=_0x32801a['length']-0x1;_0x5d0539=-_0x9d4f41;_0x56a34f=-0x1;}_0x469cc8++;const _0x30d59a=_0x32801a['length']-0x1-_0x1f4c9a;let _0x25e8dd=_0x1f4c9a;let _0x48ae51=[];for(let _0x3c56a7=0x0;_0x3c56a7<_0x32801a['length'];_0x3c56a7++){_0x48ae51[_0x3c56a7]=_0x32801a[_0x3c56a7];}_0x2ef0f5['push'](_0x48ae51);let _0xd4891f=0x0;while(_0x30d59a!=0x0&&_0x25e8dd<_0x30d59a||_0x30d59a==0x0&&_0x25e8dd>0x0&&_0xd4891f<_0x9d4f41){let _0x2e33f2=_0x25e8dd;while(!this['isAtEdge'](_0x358d3c,_0x25e8dd)){_0x2e33f2=_0x2e33f2+_0x56a34f;const _0x4c75e2=_0x32801a[_0x2e33f2];const _0x492b69=_0x32801a[_0x25e8dd];const _0x1a040d=this['swallowUp'](_0x2e33f2,_0x25e8dd);if(_0x1a040d||!_0x1a040d&&_0x4c75e2!=0x0&&_0x492b69!=0x0){_0x25e8dd=_0x25e8dd+_0x56a34f;_0x2e33f2=_0x25e8dd;continue;}if(this['isAtEdge'](_0x358d3c,_0x2e33f2)){_0x25e8dd=_0x2e33f2;break;}}_0x1f4c9a+=_0x5d0539;_0xd4891f++;_0x25e8dd=_0x1f4c9a;}this['randomVal']();},'isAtEdge':function(_0x1de004,_0x492b50){let _0x1ec83b=0x0,_0x37b4b3=_0x9d4f41-0x1;const _0x46883f=_0x9d4f41-0x1,_0x3eb5c9=_0x32801a['length']-_0x9d4f41;switch(_0x1de004){case'down':return _0x492b50<=_0x46883f;case'up':return _0x492b50>=_0x3eb5c9;case'left':return _0x492b50%_0x9d4f41==_0x37b4b3;case'right':return _0x492b50%_0x9d4f41==_0x1ec83b;}},'swallowUp':function(_0x3124b5,_0x3dfe21){const _0x1690e4=_0x32801a[_0x3124b5],_0x487205=_0x32801a[_0x3dfe21];if(_0x1690e4==0x0)return![];if(_0x1690e4==_0x487205||_0x487205==0x0){const _0x3f493e=_0x1690e4+_0x487205;_0x32801a[_0x3dfe21]=_0x3f493e;_0x32801a[_0x3124b5]=0x0;_0x10871a['push']({'type':'move','from':{'index':_0x3124b5,'value':_0x1690e4},'to':{'index':_0x3dfe21,'value':_0x3f493e}});_0x2e3b32=Math['max'](_0x2e3b32,_0x3f493e);if(_0x2e3b32==_0x39c51a){this['init'](_0x9d4f41);this['fireEvent']('end',this);}return _0x487205!=0x0;}return![];},'back':function(){if(_0x2ef0f5['length']<0x1)return;_0x32801a=_0x2ef0f5['pop']();this['render']();},'setRenderer':function(_0x30c068){this['renderer']=_0x30c068;_0x30c068['init'](this);},'render':function(){this['renderer']['render'](this['tiles'],_0x10871a);},'on':function(_0x23eb9a,_0x59a33e,_0x5d1b20){if(!_0x3807c9[_0x23eb9a])return;let _0x20369a=_0x3807c9[_0x23eb9a];_0x20369a['push']({'fn':_0x59a33e,'scope':_0x5d1b20});},'un':function(_0x46728f,_0x203109,_0x44eefe){if(!_0x3807c9[_0x46728f])return;let _0x28f0d4=_0x3807c9[_0x46728f];if(_0x28f0d4['length']<0x1)return;for(let _0x41130e=0x0;_0x41130e<_0x28f0d4['length'];_0x41130e++){const _0x3fa6d1=_0x28f0d4[_0x41130e];if(_0x3fa6d1['fn']==_0x203109&&_0x3fa6d1['scope']==_0x44eefe){_0x28f0d4['splice'](_0x41130e,0x1);break;}}},'fireEvent':function(){const _0x307b9d=arguments[0x0];const _0x47a436=arguments['slice'](0x1);const _0x4eb600=_0x3807c9[_0x307b9d];if(!_0x4eb600||_0x4eb600['length']<0x1)return;for(let _0x22bc1f=0x0;_0x22bc1f<_0x4eb600['length'];_0x22bc1f++){let _0x29668e=_0x4eb600[_0x22bc1f];if(typeof _0x29668e['fn']=='function'){_0x29668e['fn']['apply'](_0x29668e['scope'],_0x47a436);}}}};_0x3cdddc['init'](_0x9d4f41);return _0x3cdddc;};let consoleRender=function(){};consoleRender['prototype']['map']={0x57:'up',0x53:'down',0x41:'left',0x44:'right',0x25:'left',0x26:'up',0x27:'right',0x28:'down',0x5a:'z'};consoleRender['prototype']['game']=null;consoleRender['prototype']['colorPalette']=function(_0x3545e3){const _0xf124d4=['#eee4da','#ede0c8','#f2b179','#f59563','#f67c5f','#f65e3b','#edcf72','#edcc61','#edc850','#edc53f','#edc22e'];let _0x3f21a1={};const _0x61cb15=_0x3545e3['split'](',');const _0x1c7bc5=_0x61cb15['length'];for(let _0x3e671a=0x0;_0x3e671a<_0x1c7bc5;_0x3e671a++){_0x3f21a1[_0x61cb15[_0x3e671a]]='background-color:'+_0xf124d4[_0x3e671a]+';';}return _0x3f21a1;};consoleRender['prototype']['pad']=function(_0x470127,_0x5598df){_0x470127=(_0x470127||'\x20')+'';while(_0x5598df>_0x470127['length'])_0x470127='\x20'+_0x470127+'\x20';if(_0x470127['length']>_0x5598df)_0x470127=_0x470127['slice'](0x0,_0x5598df-_0x470127['length']);return _0x470127;};consoleRender['prototype']['render']=function(_0x8e2207,_0x626e42,_0x5d5a7b){if(!_0x5d5a7b)console['clear']();console['log']('\x20');const _0x1bdc0d=Math['sqrt'](_0x8e2207['length']);const _0x21b84a=this['colorPalette']('2,4,8,16,32,64,128,256,512,1024,2048');const _0x33a05e='text-align:center;width:100px;display:block;background-color:#ccc;padding:4px\x207px;line-height:1.4;color:#000;';for(let _0x5cb967=0x0;_0x5cb967<_0x1bdc0d;_0x5cb967+=0x1){let _0x3aabdc=[];let _0x216282=[];for(let _0x2c7bb8=0x0;_0x2c7bb8<_0x1bdc0d;_0x2c7bb8++){const _0x1930f0=_0x8e2207[_0x1bdc0d*_0x5cb967+_0x2c7bb8];_0x3aabdc['push']('%c'+this['pad'](_0x1930f0,0x4)+'%c');_0x216282['push'](_0x33a05e+'font-size:14px;'+(_0x21b84a[_0x1930f0]||''));_0x216282['push']('');}_0x3aabdc['push']('%c'+Math['random']());_0x216282['push']('padding-left:50px;dispaly:none;color:white;line-height:1.3');console['log']['apply'](console,[_0x3aabdc['join']('')]['concat'](_0x216282));}let _0x4a1162=[];for(let _0x47c260=0x0;_0x47c260<_0x626e42['length'];_0x47c260++){const _0x1fd25d=_0x626e42[_0x47c260];if(_0x1fd25d['type']==='move'){_0x4a1162['push']('#'+_0x1fd25d['from']['index']+'->#'+_0x1fd25d['to']['index']);}else{_0x4a1162['push'](_0x1fd25d['value']+'\x20created\x20at\x20#'+_0x1fd25d['index']);}}console['log']('actions:\x20'+_0x4a1162['join']('\x20,\x20')+'\x20,\x20'+'highestScore:'+this['game']['highestScore']);};consoleRender['prototype']['keydownHandler']=function(_0x4d5c41){let _0x5dedc6,_0x1b3cc6;_0x5dedc6=_0x4d5c41['keyCode']||_0x4d5c41['which'];if(!this['started']){if(_0x5dedc6===0xd){this['started']=!![];this['game']['render']();}return;}if(!this['map'][_0x5dedc6])return;if(this['map'][_0x5dedc6]==='z'){return this['game']['back']();}this['game']['move'](this['map'][_0x5dedc6]);this['game']['render']();};consoleRender['prototype']['init']=function(_0x12d6b7){console['log']('%c芜湖~!\x20感谢访问俺滴小破站,\x20既然打开了控制台,\x20那就试试在这里玩2048吧!%c','color:#999;font-family:幼圆;font-size:14px','');const _0x972582=['Dock\x20your\x20console\x20to\x20main\x20window,\x20press\x20%cENTER%c\x20to\x20start\x20and\x20use\x20%carrow\x20key%c\x20or\x20%cWASD%c\x20to\x20play\x202048\x20in\x20console!','color:red;font-weight:bold;','','color:red;font-weight:bold;','','color:red;font-weight:bold;',''];console['log']['apply'](console,_0x972582);console['log']('Click\x20on\x20page\x20(not\x20console)\x20to\x20make\x20sure\x20script\x20is\x20able\x20to\x20capture\x20key\x20events');this['game']=_0x12d6b7;if(typeof $=='function'){$(window)['on']('keydown',$['proxy'](this['keydownHandler'],this));}else{window['addEventListener']=this['keydownHandler']['bind'](this);}};(()=>{if(!console)return;const _0x5c0371=new gmFactory(0x4);const _0x22c2e3=new consoleRender();_0x5c0371['setRenderer'](_0x22c2e3);_0x22c2e3['render'](_0x5c0371['tiles'],_0x5c0371['actions'],!![]);})();